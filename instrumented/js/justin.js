function cov_4xej1ikns(){var path="C:\\Users\\justi\\OneDrive - Temasek Polytechnic\\year2_sec sem\\DVOPS_Projects\\DVOPS-PROJECT\\public\\js\\justin.js";var hash="124c361542cdc5c15005f1bff847b1c15a53fcfa";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\justi\\OneDrive - Temasek Polytechnic\\year2_sec sem\\DVOPS_Projects\\DVOPS-PROJECT\\public\\js\\justin.js",statementMap:{"0":{start:{line:3,column:22},end:{line:37,column:5}},"1":{start:{line:40,column:4},end:{line:42,column:5}},"2":{start:{line:41,column:8},end:{line:41,column:65}},"3":{start:{line:48,column:27},end:{line:48,column:31}},"4":{start:{line:51,column:4},end:{line:51,column:22}},"5":{start:{line:54,column:4},end:{line:54,column:72}},"6":{start:{line:55,column:4},end:{line:55,column:84}},"7":{start:{line:56,column:4},end:{line:56,column:74}},"8":{start:{line:59,column:4},end:{line:59,column:112}},"9":{start:{line:62,column:4},end:{line:62,column:42}},"10":{start:{line:68,column:19},end:{line:72,column:5}},"11":{start:{line:75,column:4},end:{line:79,column:5}},"12":{start:{line:76,column:8},end:{line:76,column:86}},"13":{start:{line:77,column:8},end:{line:77,column:73}},"14":{start:{line:78,column:8},end:{line:78,column:15}},"15":{start:{line:81,column:23},end:{line:81,column:51}},"16":{start:{line:82,column:4},end:{line:86,column:5}},"17":{start:{line:83,column:8},end:{line:83,column:94}},"18":{start:{line:84,column:8},end:{line:84,column:73}},"19":{start:{line:85,column:8},end:{line:85,column:15}},"20":{start:{line:88,column:18},end:{line:88,column:38}},"21":{start:{line:89,column:4},end:{line:89,column:54}},"22":{start:{line:90,column:4},end:{line:90,column:65}},"23":{start:{line:92,column:4},end:{line:113,column:6}},"24":{start:{line:93,column:8},end:{line:112,column:9}},"25":{start:{line:94,column:29},end:{line:94,column:61}},"26":{start:{line:98,column:12},end:{line:108,column:13}},"27":{start:{line:99,column:16},end:{line:99,column:95}},"28":{start:{line:100,column:16},end:{line:100,column:82}},"29":{start:{line:101,column:16},end:{line:104,column:24}},"30":{start:{line:102,column:20},end:{line:102,column:58}},"31":{start:{line:106,column:16},end:{line:106,column:90}},"32":{start:{line:107,column:16},end:{line:107,column:81}},"33":{start:{line:110,column:12},end:{line:110,column:86}},"34":{start:{line:111,column:12},end:{line:111,column:77}},"35":{start:{line:115,column:4},end:{line:118,column:6}},"36":{start:{line:116,column:8},end:{line:116,column:85}},"37":{start:{line:117,column:8},end:{line:117,column:73}},"38":{start:{line:120,column:4},end:{line:120,column:43}}},fnMap:{"0":{name:"createEditModal",decl:{start:{line:2,column:9},end:{line:2,column:24}},loc:{start:{line:2,column:27},end:{line:43,column:1}},line:2},"1":{name:"editResource",decl:{start:{line:46,column:9},end:{line:46,column:21}},loc:{start:{line:46,column:28},end:{line:63,column:1}},line:46},"2":{name:"updateResource",decl:{start:{line:67,column:9},end:{line:67,column:23}},loc:{start:{line:67,column:28},end:{line:121,column:1}},line:67},"3":{name:"(anonymous_3)",decl:{start:{line:92,column:21},end:{line:92,column:22}},loc:{start:{line:92,column:39},end:{line:113,column:5}},line:92},"4":{name:"(anonymous_4)",decl:{start:{line:101,column:27},end:{line:101,column:28}},loc:{start:{line:101,column:33},end:{line:104,column:17}},line:101},"5":{name:"(anonymous_5)",decl:{start:{line:115,column:22},end:{line:115,column:23}},loc:{start:{line:115,column:33},end:{line:118,column:5}},line:115}},branchMap:{"0":{loc:{start:{line:40,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:40,column:4},end:{line:42,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:40},"1":{loc:{start:{line:75,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:75,column:4},end:{line:79,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:75},"2":{loc:{start:{line:75,column:8},end:{line:75,column:86}},type:"binary-expr",locations:[{start:{line:75,column:8},end:{line:75,column:29}},{start:{line:75,column:33},end:{line:75,column:60}},{start:{line:75,column:64},end:{line:75,column:86}}],line:75},"3":{loc:{start:{line:82,column:4},end:{line:86,column:5}},type:"if",locations:[{start:{line:82,column:4},end:{line:86,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:82},"4":{loc:{start:{line:98,column:12},end:{line:108,column:13}},type:"if",locations:[{start:{line:98,column:12},end:{line:108,column:13}},{start:{line:105,column:19},end:{line:108,column:13}}],line:98}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"124c361542cdc5c15005f1bff847b1c15a53fcfa"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_4xej1ikns=function(){return actualCoverage;};}return actualCoverage;}cov_4xej1ikns();// Function to create and add the modal HTML to the document
function createEditModal(){cov_4xej1ikns().f[0]++;const modalHTML=(cov_4xej1ikns().s[0]++,`
        <div class="modal fade" id="editResourceModal" tabindex="-1" role="dialog" aria-labelledby="editResourceModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editResourceModalLabel">Edit Resource</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="editTitle">Title</label>
                                <input type="text" class="form-control" id="editTitle" placeholder="Enter title">
                            </div>
                            <div class="form-group">
                                <label for="editDescription">Description</label>
                                <textarea class="form-control" id="editDescription" rows="3" placeholder="Enter description"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="editAuthor">Author</label>
                                <input type="text" class="form-control" id="editAuthor" placeholder="Enter author email">
                            </div>
                            <p id="editMessage" class=""></p>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="updateButton">Update Resource</button>
                    </div>
                </div>
            </div>
        </div>
    `);// Append modal to document body if it doesnâ€™t already exist
cov_4xej1ikns().s[1]++;if(!document.getElementById('editResourceModal')){cov_4xej1ikns().b[0][0]++;cov_4xej1ikns().s[2]++;document.body.insertAdjacentHTML('beforeend',modalHTML);}else{cov_4xej1ikns().b[0][1]++;}}// Edit resource function to populate and show the modal
function editResource(data){cov_4xej1ikns().f[1]++;// Check if `data` is a string and parse only if necessary
var selectedResource=(cov_4xej1ikns().s[3]++,data);// Dynamically create modal if it doesn't exist
cov_4xej1ikns().s[4]++;createEditModal();// Populate the form fields with resource data
cov_4xej1ikns().s[5]++;document.getElementById("editTitle").value=selectedResource.title;cov_4xej1ikns().s[6]++;document.getElementById("editDescription").value=selectedResource.description;cov_4xej1ikns().s[7]++;document.getElementById("editAuthor").value=selectedResource.author;// Set the update button to call updateResource with the correct ID
cov_4xej1ikns().s[8]++;document.getElementById("updateButton").setAttribute("onclick",`updateResource("${selectedResource.id}")`);// Show the modal
cov_4xej1ikns().s[9]++;$('#editResourceModal').modal('show');}// Update resource function to send updated data to the server
function updateResource(id){cov_4xej1ikns().f[2]++;var jsonData=(cov_4xej1ikns().s[10]++,{title:document.getElementById("editTitle").value,description:document.getElementById("editDescription").value,author:document.getElementById("editAuthor").value});// Validation
cov_4xej1ikns().s[11]++;if((cov_4xej1ikns().b[2][0]++,jsonData.title==="")||(cov_4xej1ikns().b[2][1]++,jsonData.description==="")||(cov_4xej1ikns().b[2][2]++,jsonData.author==="")){cov_4xej1ikns().b[1][0]++;cov_4xej1ikns().s[12]++;document.getElementById("editMessage").innerHTML='All fields are required!';cov_4xej1ikns().s[13]++;document.getElementById("editMessage").className="text-danger";cov_4xej1ikns().s[14]++;return;}else{cov_4xej1ikns().b[1][1]++;}const emailRegex=(cov_4xej1ikns().s[15]++,/^[^\s@]+@[^\s@]+\.[^\s@]+$/);cov_4xej1ikns().s[16]++;if(!emailRegex.test(jsonData.author)){cov_4xej1ikns().b[3][0]++;cov_4xej1ikns().s[17]++;document.getElementById("editMessage").innerHTML='Invalid email format for author!';cov_4xej1ikns().s[18]++;document.getElementById("editMessage").className="text-danger";cov_4xej1ikns().s[19]++;return;}else{cov_4xej1ikns().b[3][1]++;}var request=(cov_4xej1ikns().s[20]++,new XMLHttpRequest());cov_4xej1ikns().s[21]++;request.open("PUT","/edit-resource/"+id,true);cov_4xej1ikns().s[22]++;request.setRequestHeader('Content-Type','application/json');cov_4xej1ikns().s[23]++;request.onload=async function(){cov_4xej1ikns().f[3]++;cov_4xej1ikns().s[24]++;try{const response=(cov_4xej1ikns().s[25]++,JSON.parse(request.responseText));// if (response.message === "Invalid email format for author!"){
//     document.getElementById("editMessage").innerHTML = 'Invalid email format for author!';
//     document.getElementById("editMessage").className = "text-danger";
cov_4xej1ikns().s[26]++;if(response.message==="Blog modified successfully!"){cov_4xej1ikns().b[4][0]++;cov_4xej1ikns().s[27]++;document.getElementById("editMessage").innerHTML='Edited blog successfully!';cov_4xej1ikns().s[28]++;document.getElementById("editMessage").className="text-success";cov_4xej1ikns().s[29]++;setTimeout(()=>{cov_4xej1ikns().f[4]++;cov_4xej1ikns().s[30]++;$('#editResourceModal').modal('hide');// Redirect only if Cypress is not running
},100);}else{cov_4xej1ikns().b[4][1]++;cov_4xej1ikns().s[31]++;document.getElementById("editMessage").innerHTML='Unable to edit blog!';cov_4xej1ikns().s[32]++;document.getElementById("editMessage").className="text-danger";}}catch(e){cov_4xej1ikns().s[33]++;document.getElementById("editMessage").innerHTML='Error updating blog!';cov_4xej1ikns().s[34]++;document.getElementById("editMessage").className="text-danger";}};cov_4xej1ikns().s[35]++;request.onerror=function(){cov_4xej1ikns().f[5]++;cov_4xej1ikns().s[36]++;document.getElementById("editMessage").innerHTML='Network error occurred!';cov_4xej1ikns().s[37]++;document.getElementById("editMessage").className="text-danger";};cov_4xej1ikns().s[38]++;request.send(JSON.stringify(jsonData));}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfNHhlajFpa25zIiwiYWN0dWFsQ292ZXJhZ2UiLCJjcmVhdGVFZGl0TW9kYWwiLCJmIiwibW9kYWxIVE1MIiwicyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJiIiwiYm9keSIsImluc2VydEFkamFjZW50SFRNTCIsImVkaXRSZXNvdXJjZSIsImRhdGEiLCJzZWxlY3RlZFJlc291cmNlIiwidmFsdWUiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYXV0aG9yIiwic2V0QXR0cmlidXRlIiwiaWQiLCIkIiwibW9kYWwiLCJ1cGRhdGVSZXNvdXJjZSIsImpzb25EYXRhIiwiaW5uZXJIVE1MIiwiY2xhc3NOYW1lIiwiZW1haWxSZWdleCIsInRlc3QiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ubG9hZCIsInJlc3BvbnNlIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwibWVzc2FnZSIsInNldFRpbWVvdXQiLCJlIiwib25lcnJvciIsInNlbmQiLCJzdHJpbmdpZnkiXSwic291cmNlcyI6WyJqdXN0aW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGFuZCBhZGQgdGhlIG1vZGFsIEhUTUwgdG8gdGhlIGRvY3VtZW50XHJcbmZ1bmN0aW9uIGNyZWF0ZUVkaXRNb2RhbCgpIHtcclxuICAgIGNvbnN0IG1vZGFsSFRNTCA9IGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZVwiIGlkPVwiZWRpdFJlc291cmNlTW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGFyaWEtbGFiZWxsZWRieT1cImVkaXRSZXNvdXJjZU1vZGFsTGFiZWxcIiBhcmlhLWhpZGRlbj1cInRydWVcIj5cclxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiIHJvbGU9XCJkb2N1bWVudFwiPlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoNSBjbGFzcz1cIm1vZGFsLXRpdGxlXCIgaWQ9XCJlZGl0UmVzb3VyY2VNb2RhbExhYmVsXCI+RWRpdCBSZXNvdXJjZTwvaDU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiIGFyaWEtbGFiZWw9XCJDbG9zZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZm9ybS1ncm91cFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJlZGl0VGl0bGVcIj5UaXRsZTwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVkaXRUaXRsZVwiIHBsYWNlaG9sZGVyPVwiRW50ZXIgdGl0bGVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZWRpdERlc2NyaXB0aW9uXCI+RGVzY3JpcHRpb248L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBjbGFzcz1cImZvcm0tY29udHJvbFwiIGlkPVwiZWRpdERlc2NyaXB0aW9uXCIgcm93cz1cIjNcIiBwbGFjZWhvbGRlcj1cIkVudGVyIGRlc2NyaXB0aW9uXCI+PC90ZXh0YXJlYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZvcm0tZ3JvdXBcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiZWRpdEF1dGhvclwiPkF1dGhvcjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJmb3JtLWNvbnRyb2xcIiBpZD1cImVkaXRBdXRob3JcIiBwbGFjZWhvbGRlcj1cIkVudGVyIGF1dGhvciBlbWFpbFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBpZD1cImVkaXRNZXNzYWdlXCIgY2xhc3M9XCJcIj48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnlcIiBkYXRhLWRpc21pc3M9XCJtb2RhbFwiPkNsb3NlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCIgaWQ9XCJ1cGRhdGVCdXR0b25cIj5VcGRhdGUgUmVzb3VyY2U8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIGA7XHJcblxyXG4gICAgLy8gQXBwZW5kIG1vZGFsIHRvIGRvY3VtZW50IGJvZHkgaWYgaXQgZG9lc27igJl0IGFscmVhZHkgZXhpc3RcclxuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRSZXNvdXJjZU1vZGFsJykpIHtcclxuICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgbW9kYWxIVE1MKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gRWRpdCByZXNvdXJjZSBmdW5jdGlvbiB0byBwb3B1bGF0ZSBhbmQgc2hvdyB0aGUgbW9kYWxcclxuZnVuY3Rpb24gZWRpdFJlc291cmNlKGRhdGEpIHtcclxuICAgIC8vIENoZWNrIGlmIGBkYXRhYCBpcyBhIHN0cmluZyBhbmQgcGFyc2Ugb25seSBpZiBuZWNlc3NhcnlcclxuICAgIHZhciBzZWxlY3RlZFJlc291cmNlID0gZGF0YTtcclxuXHJcbiAgICAvLyBEeW5hbWljYWxseSBjcmVhdGUgbW9kYWwgaWYgaXQgZG9lc24ndCBleGlzdFxyXG4gICAgY3JlYXRlRWRpdE1vZGFsKCk7XHJcblxyXG4gICAgLy8gUG9wdWxhdGUgdGhlIGZvcm0gZmllbGRzIHdpdGggcmVzb3VyY2UgZGF0YVxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0VGl0bGVcIikudmFsdWUgPSBzZWxlY3RlZFJlc291cmNlLnRpdGxlO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0RGVzY3JpcHRpb25cIikudmFsdWUgPSBzZWxlY3RlZFJlc291cmNlLmRlc2NyaXB0aW9uO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0QXV0aG9yXCIpLnZhbHVlID0gc2VsZWN0ZWRSZXNvdXJjZS5hdXRob3I7XHJcblxyXG4gICAgLy8gU2V0IHRoZSB1cGRhdGUgYnV0dG9uIHRvIGNhbGwgdXBkYXRlUmVzb3VyY2Ugd2l0aCB0aGUgY29ycmVjdCBJRFxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1cGRhdGVCdXR0b25cIikuc2V0QXR0cmlidXRlKFwib25jbGlja1wiLCBgdXBkYXRlUmVzb3VyY2UoXCIke3NlbGVjdGVkUmVzb3VyY2UuaWR9XCIpYCk7XHJcblxyXG4gICAgLy8gU2hvdyB0aGUgbW9kYWxcclxuICAgICQoJyNlZGl0UmVzb3VyY2VNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcbn1cclxuXHJcblxyXG4vLyBVcGRhdGUgcmVzb3VyY2UgZnVuY3Rpb24gdG8gc2VuZCB1cGRhdGVkIGRhdGEgdG8gdGhlIHNlcnZlclxyXG5mdW5jdGlvbiB1cGRhdGVSZXNvdXJjZShpZCkge1xyXG4gICAgdmFyIGpzb25EYXRhID0ge1xyXG4gICAgICAgIHRpdGxlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRUaXRsZVwiKS52YWx1ZSxcclxuICAgICAgICBkZXNjcmlwdGlvbjogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0RGVzY3JpcHRpb25cIikudmFsdWUsXHJcbiAgICAgICAgYXV0aG9yOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRBdXRob3JcIikudmFsdWVcclxuICAgIH07XHJcblxyXG4gICAgLy8gVmFsaWRhdGlvblxyXG4gICAgaWYgKGpzb25EYXRhLnRpdGxlID09PSBcIlwiIHx8IGpzb25EYXRhLmRlc2NyaXB0aW9uID09PSBcIlwiIHx8IGpzb25EYXRhLmF1dGhvciA9PT0gXCJcIikge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1lc3NhZ2VcIikuaW5uZXJIVE1MID0gJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkISc7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TWVzc2FnZVwiKS5jbGFzc05hbWUgPSBcInRleHQtZGFuZ2VyXCI7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBlbWFpbFJlZ2V4ID0gL15bXlxcc0BdK0BbXlxcc0BdK1xcLlteXFxzQF0rJC87XHJcbiAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChqc29uRGF0YS5hdXRob3IpKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TWVzc2FnZVwiKS5pbm5lckhUTUwgPSAnSW52YWxpZCBlbWFpbCBmb3JtYXQgZm9yIGF1dGhvciEnO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1lc3NhZ2VcIikuY2xhc3NOYW1lID0gXCJ0ZXh0LWRhbmdlclwiO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgcmVxdWVzdC5vcGVuKFwiUFVUXCIsIFwiL2VkaXQtcmVzb3VyY2UvXCIgKyBpZCwgdHJ1ZSk7XHJcbiAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcblxyXG4gICAgcmVxdWVzdC5vbmxvYWQgPSBhc3luYyBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgLy8gaWYgKHJlc3BvbnNlLm1lc3NhZ2UgPT09IFwiSW52YWxpZCBlbWFpbCBmb3JtYXQgZm9yIGF1dGhvciFcIil7XHJcbiAgICAgICAgICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmlubmVySFRNTCA9ICdJbnZhbGlkIGVtYWlsIGZvcm1hdCBmb3IgYXV0aG9yISc7XHJcbiAgICAgICAgICAgIC8vICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmNsYXNzTmFtZSA9IFwidGV4dC1kYW5nZXJcIjtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm1lc3NhZ2UgPT09IFwiQmxvZyBtb2RpZmllZCBzdWNjZXNzZnVsbHkhXCIpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1lc3NhZ2VcIikuaW5uZXJIVE1MID0gJ0VkaXRlZCBibG9nIHN1Y2Nlc3NmdWxseSEnO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TWVzc2FnZVwiKS5jbGFzc05hbWUgPSBcInRleHQtc3VjY2Vzc1wiO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2VkaXRSZXNvdXJjZU1vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZWRpcmVjdCBvbmx5IGlmIEN5cHJlc3MgaXMgbm90IHJ1bm5pbmdcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmlubmVySFRNTCA9ICdVbmFibGUgdG8gZWRpdCBibG9nISc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmNsYXNzTmFtZSA9IFwidGV4dC1kYW5nZXJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TWVzc2FnZVwiKS5pbm5lckhUTUwgPSAnRXJyb3IgdXBkYXRpbmcgYmxvZyEnO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmNsYXNzTmFtZSA9IFwidGV4dC1kYW5nZXJcIjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1lc3NhZ2VcIikuaW5uZXJIVE1MID0gJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQhJztcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmNsYXNzTmFtZSA9IFwidGV4dC1kYW5nZXJcIjtcclxuICAgIH07XHJcblxyXG4gICAgcmVxdWVzdC5zZW5kKEpTT04uc3RyaW5naWZ5KGpzb25EYXRhKSk7XHJcbn0iXSwibWFwcGluZ3MiOiJxcUtBZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlo7QUFDQSxRQUFTLENBQUFFLGVBQWVBLENBQUEsQ0FBRyxDQUFBRixhQUFBLEdBQUFHLENBQUEsTUFDdkIsS0FBTSxDQUFBQyxTQUFTLEVBQUFKLGFBQUEsR0FBQUssQ0FBQSxNQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssRUFFRDtBQUFBTCxhQUFBLEdBQUFLLENBQUEsTUFDQSxHQUFJLENBQUNDLFFBQVEsQ0FBQ0MsY0FBYyxDQUFDLG1CQUFtQixDQUFDLENBQUUsQ0FBQVAsYUFB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